% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/frequentistMarginal.R
\name{calculate_marginal_effect}
\alias{calculate_marginal_effect}
\title{Calculate Marginal Effects from Predicted Probabilities}
\usage{
calculate_marginal_effect(
  predictions_long,
  focal_var,
  focal_contrast,
  moderator = NULL,
  prob_col = "probability",
  category_col = "category",
  conf_level = 0.95
)
}
\arguments{
\item{predictions_long}{Data frame with predictions in long format (from
predict_ordinal_probs or predict_logit_probs), must include 'draw' column}

\item{focal_var}{Character. Name of the focal variable for marginal effect}

\item{focal_contrast}{Vector of length 2. Values of focal_var to contrast
(e.g., c(0, 1) or c("pre", "post")). Effect = focal_contrast[2] - focal_contrast[1]}

\item{moderator}{Character. Optional name of moderating variable. Default NULL.}

\item{prob_col}{Character. Name of probability column. Default "probability"}

\item{category_col}{Character. Name of category column for ordinal models.
Default "category". Set to NULL for binary/continuous outcomes.}

\item{conf_level}{Numeric. Confidence level. Default 0.95.}
}
\value{
Data frame with marginal effects and confidence intervals
}
\description{
Computes the marginal effect (difference in predicted probabilities) when
changing a focal variable, optionally moderated by another variable.
}
\examples{
\dontrun{
# Binary outcome - simple marginal effect
me1 <- calculate_marginal_effect(
  predictions_long,
  focal_var = "prepost",
  focal_contrast = c(0, 1)
)

# Binary outcome - moderated effect
me2 <- calculate_marginal_effect(
  predictions_long,
  focal_var = "prepost",
  focal_contrast = c(0, 1),
  moderator = "vote_trump"
)

# Ordinal outcome with categories
me3 <- calculate_marginal_effect(
  predictions_long,
  focal_var = "prepost",
  focal_contrast = c(0, 1),
  moderator = "vote_trump",
  category_col = "category"
)
}

}
